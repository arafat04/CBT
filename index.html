<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Cognitive Distortions Quiz</title>

<style>
body {
    font-family: Arial, sans-serif;
    background: #f5f5f5;
    margin: 30px;
}

h1 {
    text-align: center;
}

.question {
    background: #ffffff;
    padding: 15px;
    margin-bottom: 25px;
    border-radius: 6px;
}

.question p {
    white-space: pre-line;
}

.option {
    display: block;
    margin: 6px 0;
}

.correct {
    color: green;
    font-weight: bold;
}

.wrong {
    color: red;
    font-weight: bold;
}

button {
    padding: 8px 12px;
    margin-top: 10px;
    cursor: pointer;
}

#explanation {
    background: #eef6ff;
    padding: 20px;
    margin-top: 40px;
    border-left: 5px solid #2b6cb0;
    display: none;
}

/* Modal */
#definitionsModal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.6);
    z-index: 1000;
    display: none;
}

#definitionsContent {
    background: white;
    width: 80%;
    max-width: 900px;
    margin: 40px auto;
    padding: 25px;
    border-radius: 8px;
    max-height: 85%;
    overflow-y: auto;
    position: relative;
}

#closeModal {
    position: absolute;
    top: 10px;
    right: 15px;
    font-size: 28px;
    cursor: pointer;
}
</style>
</head>

<body>

<h1>Cognitive Distortions Self-Assessment Quiz</h1>

<button onclick="shuffleQuestions()">Shuffle Questions</button>
<button onclick="submitQuiz()">Submit Quiz</button>

<div id="quiz"></div>

<div id="explanation">
<h2>Explanation for the First Scenario</h2>

<p>
Any answer(s) you selected were correct. Multiple distortions are present:
</p>

<ul>
<li><strong>All-or-nothing thinking:</strong> “I’m a total failure.”</li>
<li><strong>Overgeneralization:</strong> “I never do anything right.”</li>
<li><strong>Magnification:</strong> “I can’t stand it.”</li>
<li><strong>Labeling:</strong> Calling yourself a “slave” and your husband “a jerk.”</li>
</ul>

<p>
An overcooked roast does not define your worth. These thoughts exaggerate,
globalize, and mislabel a minor event.
</p>

<p>
When you tell yourself “I’m a total failure,” you engage in all-or-nothing
thinking. When you say “I never do anything right,” you are overgeneralizing.
When you say “I can’t stand it,” you are magnifying the pain. And when you
label yourself a slave and your husband a jerk, you are labeling rather than
describing specific behavior.
</p>
</div>

<!-- Definitions Modal -->
<div id="definitionsModal">
  <div id="definitionsContent">
    <span id="closeModal" onclick="closeDefinitions()">×</span>

    <h2>Cognitive Distortions — Definitions</h2>

    <p><strong>All-or-Nothing Thinking</strong><br>
    Viewing things in black-and-white categories.</p>

    <p><strong>Overgeneralization</strong><br>
    Viewing a single negative event as a never-ending pattern.</p>

    <p><strong>Mental Filter</strong><br>
    Focusing exclusively on one negative detail.</p>

    <p><strong>Disqualifying the Positive</strong><br>
    Rejecting positive experiences as not counting.</p>

    <p><strong>Jumping to Conclusions</strong><br>
    Making negative interpretations without evidence.</p>

    <p><strong>Magnification / Minimization</strong><br>
    Exaggerating negatives or shrinking positives.</p>

    <p><strong>Emotional Reasoning</strong><br>
    Assuming feelings reflect facts.</p>

    <p><strong>Should Statements</strong><br>
    Using “shoulds” and “musts” to motivate or judge.</p>

    <p><strong>Labeling / Mislabeling</strong><br>
    Attaching global negative labels.</p>

    <p><strong>Personalization</strong><br>
    Assuming responsibility for events outside your control.</p>
  </div>
</div>

<script>
/* =========================
   DATA (JSON-style objects)
   ========================= */

const questions = [
{
    body:
        "You are a housewife, and your heart sinks when your husband has just\n" +
        "complained disgruntledly that the roast beef was overdone.\n\n" +
        "The following thought crosses your mind:\n\n" +
        "“I’m a total failure. I can’t stand it! I never do anything right.\n" +
        "I work like a slave and this is all the thanks I get! The jerk!”\n\n" +
        "These thoughts cause you to feel sad and angry.\n\n" +
        "Your distortions include:",
    options: [
        "All-or-nothing thinking",
        "Overgeneralization",
        "Magnification",
        "Labeling",
        "All of the above"
    ],
    correct: [0,1,2,3,4]
},
{
    body:
        "You have just read that you must take this self-assessment quiz.\n\n" +
        "Your heart sinks and you think:\n\n" +
        "“Oh no, not another test! I always do lousy on tests. I’ll skip this.\n" +
        "It makes me nervous, so it wouldn’t help anyway.”\n\n" +
        "Your distortions include:",
    options: [
        "Jumping to conclusions (fortune teller error)",
        "Overgeneralization",
        "All-or-nothing thinking",
        "Personalization",
        "Emotional reasoning"
    ],
    correct: [0,1,2,4]
}
];

/* =========================
   RENDERING LOGIC
   ========================= */

const quiz = document.getElementById("quiz");

function renderQuiz() {
    quiz.innerHTML = "";

    questions.forEach((q, qi) => {
        const div = document.createElement("div");
        div.className = "question";

        const p = document.createElement("p");
        p.textContent = q.body;
        div.appendChild(p);

        q.options.forEach((opt, oi) => {
            const label = document.createElement("label");
            label.className = "option";

            const input = document.createElement("input");
            input.type = "checkbox";
            input.name = "q" + qi;
            input.value = oi;

            label.appendChild(input);
            label.appendChild(document.createTextNode(" " + opt));
            div.appendChild(label);
        });

        const defBtn = document.createElement("button");
        defBtn.type = "button";
        defBtn.textContent = "See definitions of cognitive distortions";
        defBtn.onclick = openDefinitions;

        div.appendChild(defBtn);
        quiz.appendChild(div);
    });
}

function submitQuiz() {
    questions.forEach((q, qi) => {
        const inputs = document.querySelectorAll('input[name="q' + qi + '"]');
        inputs.forEach(input => {
            const idx = Number(input.value);
            const label = input.parentElement;

            if (q.correct.includes(idx)) {
                label.classList.add("correct");
            }
            if (input.checked && !q.correct.includes(idx)) {
                label.classList.add("wrong");
            }
        });
    });

    document.getElementById("explanation").style.display = "block";
}

function shuffleQuestions() {
    for (let i = questions.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [questions[i], questions[j]] = [questions[j], questions[i]];
    }
    renderQuiz();
}

function openDefinitions() {
    document.getElementById("definitionsModal").style.display = "block";
}

function closeDefinitions() {
    document.getElementById("definitionsModal").style.display = "none";
}

renderQuiz();
</script>

</body>
</html>
